<html>
<title>Turing Tarpit Simulator</title>
<script>

/* internal values for simulated computer */
var ins_pointer = 0; 			/* instruction pointer */
var ins_pointer_changed = 0;	/* bool set to 1 if ins pointer has changed in the last step */
var ins_pointer_last_address = 0; 	/* address of ins pointer in last step */
var dat_pointer = 0; 			/* data pointer */
var dat_pointer_changed = 0; 		/* bool set to 1 if data pointer has changed in the last step */
var dat_pointer_last_address = 0; 	/* address of data pointer in last step */
var ram_last_address = 0; 		/* address of RAM updated in last step */
var breakpoints = 1; 			/* bool set to 0 to ignore breakpoints */
var ram = new Array();			/* memory of virtual machine */
var jmp = new Array();			/* used as a stack to jump from one command to another */
var ins = null; 			/* current instruction from code */
var halt = false;			/* halts program ASAP */

/* objects that display data to the user */
var disp_docs;
var disp_code;
var disp_ram;
var disp_ins_pointer;
var disp_dat_pointer;
var disp_pointer = "<div id=disp_pointer>&#8658;</div>"; /* data pointer displayed in memory block */

/* select all contents of this input for the convenience of the user */
function select_all(e)
{
	document.getElementById(e).focus();
	document.getElementById(e).select();	
}

/* highlight current instruction running on machine */
function code_highlight(inputEl, selStart, selEnd)
{
	if (inputEl.setSelectionRange) {
		inputEl.focus();
		inputEl.setSelectionRange(selStart, selEnd);
	} else if (inputEl.createTextRange) {
		var range = inputEl.createTextRange();
		range.collapse(true);
		range.moveEnd('character', selEnd);
		range.moveStart('character', selStart);
		range.select();
 	}
}

/* turns breakpoints on and off */
function debug_toggle_breakpoints()
{
	var button = document.getElementById("dbg_status");
	if(breakpoints) {
		breakpoints=0;
		button.innerHTML='<img src="http://opentextbook.info/icons/32x32/bug_delete.png">';
	}else {
		breakpoints=1;
		button.innerHTML='<img src="http://opentextbook.info/icons/32x32/bug_add.png">';
	}
}

/* removes all breakpoints in source code */
function debug_remove_breakpoints()
{
	/* ask user for permission first */
	var ans = confirm("Permanently remove all breakpoints from code?");
	var code = document.getElementById("code");
	if(ans) { code.value = code.value.replace( /\*/g , '' ); }
}

/* test current code character - return true if it is an instruction */
/* tried to use regex on this and could not get it to work :( */
function tst_inst()
{
	if(ins == '+' ||  ins == '-' ||  ins == '>' ||  ins == '<' ||
	  ins == '*' ||  ins == '.' ||  ins == '[' ||  ins == ']' ||  ins == ',') {
		return true;
	}
	return false;
}

/* find next instruction in code and move instruction pointer to it */
function fnd_nxt_inst()
{
	do {
		if(ins_pointer > disp_code.value.length) { break; } /* must stop at end of code */
		update_ins_pointer(1);
		ins = disp_code.value.substring(ins_pointer-1,ins_pointer); /* get data at ins_pointer location */
	}while(!tst_inst());
	if(ins_pointer > disp_code.value.length) {
		alert("HALT: Program is Complete");
		halt = true;
		reset();
	}
	
	/* highlight code currently executing on screen */
	code_highlight(disp_code, ins_pointer-1, ins_pointer);
}

/* find previous instruction in code and move instruction pointer to it */
function fnd_prv_inst()
{
	ins_pointer--;
	while(ins_pointer >= 0)
	{
		ins = disp_code.value.substring(ins_pointer-1, ins_pointer); /* get data at ins_pointer location */
		if(tst_inst()) { return; }
		ins_pointer--;
	}
	if(ins_pointer == 0) {
		alert("SEGFAULT: Program could not find corresponding jump instruction");
		halt = true;
		reset();
	}
}

/* execute next instruction from input */
function exe_nxt_inst()
{
	var temp_count = 0; 
	fnd_nxt_inst();
	switch(ins)
	{
		case '+':
			ram_modify(dat_pointer, 1);
  			break;
		case '-':
			ram_modify(dat_pointer, -1);
  			break;
		case '>':
			dat_point_modify(1);
			break;
		case '<':
			dat_point_modify(-1);
			break;
		case '*': /* these are comments - a break from the standard language */
			if(breakpoints) { stop(); }
			break;
		case '.':
			print_mem();
			break;
		case '[':
			jump_fwd();
			break;
		case ']':
			jump_bak();
			break;
		case ',':
			get_byte();
			break;
		default:
  			/* must be a comment :) */
	}
}

/* if byte at data pointer is = 0, jump forward to instruction after matching ']' command */
function jump_fwd()
{
	if(ram[dat_pointer] != 0) { return; }
	/* add this jump to stack */
	jmp.push('[');
	/* loop through code, pushing and popping stack until stack is empty */
	while(jmp.length > 0) {
		fnd_nxt_inst();
		if(ins == ']') { jmp.pop();
		} else if (ins == '[') { jmp.push(']'); }
	}
}

/* if byte at data pointer is != 0, jump back to instruction after matching '[' command */
function jump_bak()
{
	if(ram[dat_pointer] == 0) { return; }
	/* add this jump to stack */
	jmp.push(']');
	/* loop through code, pushing and popping stack until stack is empty */
	while(jmp.length > 0 && ins_pointer > 0) {
		fnd_prv_inst();
		if(ins == '[') { jmp.pop();
		} else if (ins == ']') { jmp.push(']'); }
	}
}

/* get single byte of input from the user */
function get_byte()
{
	var b = prompt("Please Single Byte of Data","");
	ram_set(dat_pointer, b.charCodeAt(b));
}

/*
	rewind code to beginning reset all memory locations
	this simulates rebooting the computer
*/
function reset()
{
	update_ins_pointer(0);
	dat_point_modify(0);
	ram_reset();
	ram_highlight_clear();
	dat_point_highlight();
	document.getElementById("output_disp").innerHTML = '';
	document.getElementById("addr_0").innerHTML = "0" + disp_pointer;
	disp_ins_pointer.style.backgroundColor = "#fff";
	dat_point_highlight_clear();
	code_highlight(disp_code, 0, 1);
}

/* stop stepping through code on timer if breakpoints enabled */
function stop()
{
	halt = true;
}

/* run through program on timer, stopping at breakpoints if enabled */
function run()
{
	var total_steps = document.getElementById("code").value.length;
	halt = false; /* seems weird, but this is the only way to make the halt work */
	while(ins_pointer <= total_steps && halt == false) { step_next(); }
}

/* step forward one instruction */
function step_next()
{
	//update_ins_pointer(1);
	exe_nxt_inst();
	dat_point_highlight();
}

/* more back one instruction - undoes work of previous instruction */
function step_back()
{
	update_ins_pointer(-1);
	dat_point_highlight();
}

/* update instruction pointer
	direction:
	
	1 increment pointer by one
	0 set pointer to 0
	-1 decrement pointer by one
*/
function update_ins_pointer(direction)
{
	if(direction < 0 && ins_pointer != 0 ) { ins_pointer--; }
	else if (direction == 0 ) { ins_pointer = 0; }
	else { ins_pointer++; }
	disp_ins_pointer.value =  ins_pointer;
	ins_pointer_changed = 1;
	ins_point_highlight();
}

/* update instruction pointer and set to new value */
function ins_point_modify_by_address(val)
{
	/* instruction pointer can never be less than 0 */
	if(val < 0) {
		alert("Instruction Pointer cannot be set less than Zero.");
		disp_ins_pointer.value =  ins_pointer; /* reset val to previous */
		return;
	}
	if(val > disp_code.value.length) {
		alert("Instruction Pointer cannot be set beyond end of code.\n Current length of code: " + disp_code.value.length);
		disp_ins_pointer.value =  ins_pointer; /* reset val to previous */
		return;
	}
	ins_pointer = disp_ins_pointer.value;
	if(ins_pointer_last_address != ins_pointer) { ins_pointer_changed = 1; }
	ins_point_highlight();
}

/* turns on and off data pointer highlight if it has changed this step */
function ins_point_highlight()
{
	if(ins_pointer_changed) {
		disp_ins_pointer.style.backgroundColor = "#ff0";
		ins_pointer_changed = 0;
	} else {
		disp_ins_pointer.style.backgroundColor = "#fff";
	}
}

/* setup virtual machine - must be called on page load */
function init_form()
{
	disp_code  = document.getElementById("code");
	disp_ins_pointer = document.getElementById("ins_pointer_disp");
	disp_dat_pointer = document.getElementById("dat_pointer_disp");
	disp_ram = document.getElementById("ram_disp");
	ram_reset();
	ram_init();
	document.getElementById("addr_0").innerHTML = "0" + disp_pointer;
	disp_docs = document.getElementById("docs");
	/* reset_output(); */
}

/* reset all RAM to 0 */
function ram_reset()
{
	var i;
	for(i=0; i < 64; i++) { ram[i] = 0; }
}

/* update highlight of one memory address and release other highlight if needed */
function ram_highlight(address)
{
	var disp_last_address = document.getElementById("ram_"+ram_last_address);
	/* highlight background of current address */
	document.getElementById("ram_"+address).style.backgroundColor = "#ff0";

	/* remove highlight from last address modified */
	if(ram_last_address != address){
		if(ram_last_address%2==0) {
			disp_last_address.style.backgroundColor = "#fff";
		} else {
			disp_last_address.style.backgroundColor = "#def";
		}
	}
}

/* remove highlight from all memory cells regardless of current status */
function ram_highlight_clear()
{
	var i;
	for(i=0; i < 64; i++)
	{
		if(i%2==0) {
			document.getElementById("ram_"+i).style.backgroundColor = "#fff";
		} else {
			document.getElementById("ram_"+i).style.backgroundColor = "#def";
		}
		document.getElementById("ram_"+i).innerHTML = ram[i];
	}
}

/* define RAM on screen */
function ram_init()
{
	var i;
	var table = "<table id=memory_table>\n";
	for(i=0; i < 16; i++){
		if(i%2==0) {
			table += "\t<tr class=even>";
		} else {
			table += "\t<tr class=odd>";
		}
		table += "<td width='35' class=addr id=addr_"+i+">"+i+"</td><td width='35' class=ram id=ram_"+i+">"+ram[i]+"</td>";
		table += "<td width='35' class=addr id=addr_"+(i+16)+">"+(i+16)+"</td><td class=ram id=ram_"+(i+16)+">"+ram[i+16]+"</td>\n";
		table += "<td class=addr id=addr_"+(i+32)+">"+(i+32)+"</td><td width='35' class=ram id=ram_"+(i+32)+">"+ram[i+32]+"</td>\n";
		table += "<td class=addr id=addr_"+(i+48)+">"+(i+48)+"</td><td width='35' class=ram id=ram_"+(i+48)+">"+ram[i+48]+"</td></tr>\n";
	}
	table +=  "</table>\n";
	disp_ram.innerHTML = table;
}

/*
	modify the value at this address - reset RAM highlights for all addresses
	1 increment RAM by one
	0 set RAM to 0
	-1 decrement RAM by one
*/
function ram_modify(address, change)
{
	if(address < 0 || address > 63) {
		alert("SEGFAULT: Cannot Modify Data Outside of Memory Range");
		halt = true;
		reset();
		return;
	}

	if (change > 0 ) {
		ram[address]++;
	} else if(change < 0 ) {
		ram[address]--;
	} else {
		ram[address] = 0;
	}
	ram_highlight(address);
	document.getElementById("ram_"+address).innerHTML = ram[address];
	ram_last_address = address;
}

/* modify one byte of memory - set to address */
function ram_set(address, val)
{
	if(address < 0 || address > 63) {
		alert("SEGFAULT: Cannot Modify Data Outside of Memory Range");
		halt = true;
		reset();
		return;
	}

	ram[address] = val;
	ram_highlight(address);
	document.getElementById("ram_"+address).innerHTML = ram[address];
	ram_last_address = address;
}

/*
	modify state of data pointer
	1 increment data pointer by one
	0 set data pointer to 0
	-1 decrement data pointer by one

*/
function dat_point_modify(change)
{
	dat_pointer_last_address = dat_pointer;
	if (change > 0 ) {
		dat_pointer++;
	} else if(change < 0 ) {
		/* could put SEGFAULT here, but C does not have a check for this, so neither will I ;) */
		dat_pointer--;
	} else {
		dat_pointer = 0;
	}

	/* place '>' char next to memory address in table */
	if(dat_pointer >= 0 && dat_pointer < 64) {
		document.getElementById("addr_"+dat_pointer).innerHTML = dat_pointer + disp_pointer;
	}

	/* remove '>' char next to memory address in table */
	if(dat_pointer_last_address >= 0 && dat_pointer_last_address < 64) {
		document.getElementById("addr_"+dat_pointer_last_address).innerHTML = dat_pointer_last_address;
	}

	disp_dat_pointer.value = dat_pointer;
	dat_pointer_changed = 1;
}

function dat_point_modify_by_address(val)
{
	dat_pointer_last_address = dat_pointer;
	dat_pointer = disp_dat_pointer.value;
	/* place '>' char next to memory address in table */
	if(dat_pointer >= 0 && dat_pointer < 64) {
		document.getElementById("addr_"+dat_pointer).innerHTML = dat_pointer + disp_pointer;
	}

	/* remove '>' char next to memory address in table */
	if(dat_pointer_last_address >= 0 && dat_pointer_last_address < 64) {
		document.getElementById("addr_"+dat_pointer_last_address).innerHTML = dat_pointer_last_address;
	}
	dat_pointer_changed = 1;
	dat_point_highlight();
}

/* turns on and off data pointer highlight if it has changed this step */
function dat_point_highlight()
{
	if(dat_pointer_changed) {
		disp_dat_pointer.style.backgroundColor = "#ff0";
		dat_pointer_changed = 0;
	} else {
		disp_dat_pointer.style.backgroundColor = "#fff";
	}

	/* as a convenience to the user, set to red if pointer is out of memory range */
	if(dat_pointer < 0 || dat_pointer > 63) {
		disp_dat_pointer.style.backgroundColor = "#f00";
	}
}

/* remove highlight from data pointer */
function dat_point_highlight_clear()
{
	disp_dat_pointer.style.backgroundColor = "#fff";
}

/* print ASCII representation of memory at data pointer */
function print_mem()
{
	var x = String.fromCharCode(ram[dat_pointer]);
	document.getElementById("output_disp").innerHTML += x;
}

/* documentation stored inside invisible div. This shows its contents. */
function display_docs()
{
	disp_docs.style.visibility = "visible";
	docs_select("docs_main");
}

/* hide documentation from user */
function hide_docs()
{
	disp_docs.style.visibility = "hidden";
}

function docs_select(page)
{
	if(page == "basic") {
		document.getElementById("docs_content").innerHTML = document.getElementById("docs_basic").innerHTML;
	} else if(page == "features") {
		document.getElementById("docs_content").innerHTML = document.getElementById("docs_features").innerHTML;
	} else if(page == "examples") {
		document.getElementById("docs_content").innerHTML = document.getElementById("docs_examples").innerHTML;
	} else if(page == "examples2") {
		document.getElementById("docs_content").innerHTML = document.getElementById("docs_examples2").innerHTML;
	} else if(page == "ascii") {
		document.getElementById("docs_content").innerHTML = document.getElementById("docs_ascii").innerHTML;
	} else {
		document.getElementById("docs_content").innerHTML = document.getElementById("docs_main").innerHTML;
	}
}

/*

allows user to kick off example from the help menu.
closes documentation menu, overwrites code with example.
prints error message if something goes wrong.

*/
function docs_try(ex)
{
	var ans = confirm("This will delete code currently loaded in machine.");
	if(!ans) { return; }
	hide_docs();			/* close documentation window */
	reset();			/* reset computer */
	if(ex == null) { alert("Example not setup correctly."); return; }
	disp_code.innerHTML = document.getElementById(ex).innerHTML;				/* write data out to code textarea */
}

</script>

<style type="text/css">

body {
	font-family: Tahoma, Arial, Helvetica, sans-serif;
}

#disp_pointer {
	float:right;
	color: #f00;
}

#code_buttons {
	position: absolute;
	top: 570px;
	left: 10px;
}

#input_banner {
	position: absolute;
	top: 120px;
	left: 10px;
}

#da_banner {
	position: absolute;
	top: 360px;
	left: 625px;
}

#ref_banner {
	position: absolute;
	top: 410px;
	left: 625px;
}

#ip_banner {
	position: absolute;
	top: 315px;
	left: 625px;
}

#output_banner {
	position: absolute;
	top: 120px;
	left: 625px;
}

#memory_banner {
	position: absolute;
	top: 120px;
	left: 315px;
}

#input {
	position: absolute;
	top: 140px;
	left: 10px;
}	

#ram_disp {
	position: absolute;
	top: 140px;
	left: 315px;
}

#memory_table {
	border:1px solid #000;
	border-collapse: collapse;
}

.even td {
	padding: 4px;
	border-bottom:1px solid #000;
}

.odd td {
	padding: 4px;
	background-color: #def;
	border-bottom: 1px solid #000;
}

.addr {
	color: #00f;
}

.ram {
	border-right:1px solid #000;
}

#output {
	position: absolute;
	top: 140px;
	left: 625px;
}

#docs {
	border:1px solid #000;
	background-color: #fff;
	position: absolute;
	top: 10px;
	left: 10px;
	width: 950px;
	height:700px;
	visibility: hidden;
}

#docs_top_banner {
	color: #000;
	background-color: #def;
	border-bottom:1px solid #000;
	position: absolute;
	top: 0px;
	left: 0px;
	height: 25px;
	padding-top: 5px;
	padding-left: 5px;
	width: 945px;
}

#docs_close_btn {
	background: #fff;
	border:1px solid #000;
	position: absolute;
	top: 0px;
	right: 0px;
	cursor: pointer;
	padding: 6px;
}

#docs_mnu_btn {
	border:2px solid #000;
	color: #000;
	position: absolute;
	top: 0px;
	left: 375px;
	padding-top: 3px;
	padding-left: 20px;
	padding-right: 20px;
}

#docs_content {
	position: absolute;
	top: 35px;
	padding: 10px;
}

#docs_link:hover {
	background-color: #faa;
	cursor: pointer;

}

.docs_code_ex {
	background-color: #def;
	border: 1px solid #ddd;
	padding: 5px;
}

.docs_hidden {
	visibility: hidden;
}

#instruction {
	position: absolute;
	top: 335px;
	left: 625px;
}

#data {
	position: absolute;
	top: 385px;
	left: 625px;
}

#ascii {
	border-collapse: collapse;
	border: 1px solid #ddd;
}

#reference {
	border-collapse: collapse;
	border: 1px solid #ddd;
	position: absolute;
	top: 430px;
	left: 625px;
	width: 280px;
}

#ascii {
	text-align: center;
}

#val_col {
	border-right: 1px solid #ddd;
	width: 10px;
	padding-right: 15px;
}

#dat_col {
	width: 100px;
}

.ref_even td {
	border-bottom: 1px solid #ddd;
}

.ref_odd td {
	border-bottom: 1px solid #ddd;
	background-color: #def;
}

.ref_ins {
	font-size: 18px;
	font-weight:bold;
	color: #00f;
}

</style>
<body onLoad="init_form();">

<center><h2>Turing Tarpit Simulator</h2></center>

<center>
<button onClick='reset();'><img src="http://opentextbook.info/icons/32x32/resultset_first.png" title="Restart" alt="Restart"></button>
&nbsp;&nbsp;
<button onClick='step_back();'><img src="http://opentextbook.info/icons/32x32/resultset_previous.png" title="Step Back" alt="Step Back"></button>
&nbsp;&nbsp;
<button onClick='step_next();'><img src="http://opentextbook.info/icons/32x32/resultset_next.png" title="Next Step" alt="Next Step"></button>
&nbsp;&nbsp;
<button onClick='run();'><img src="http://opentextbook.info/icons/32x32/resultset_last.png" title="Run" alt="Run"></button>
&nbsp;&nbsp;
<button onClick='halt();'><img src="http://opentextbook.info/icons/32x32/cancel.png" title="Halt Execution" alt="Halt Execution"></button>
&nbsp;&nbsp;
<button disabled><img src="http://opentextbook.info/icons/32x32/disk.png" title="Save Code" alt="Save Code"></button>
&nbsp;&nbsp;
<button onClick='display_docs();'><img src="http://opentextbook.info/icons/32x32/book_open.png" title="Open Documentation" alt="Open Documentation"></button>
</center>

<div id="code_buttons">
<button id="dbg_status" onClick='debug_toggle_breakpoints();'  title="Enable/Disable Breakpoints" alt="Enable/Disable Breakpoints">
	<img src="http://opentextbook.info/icons/32x32/bug_add.png">
</button>
&nbsp;&nbsp;
<button id="dbg_status" onClick='debug_remove_breakpoints();'  title="Remove Breakpoints" alt="Remove Breakpoints">
	<img src="http://opentextbook.info/icons/32x32/bin.png">
</button>
</div>

<div id="input_banner">INPUT</div>
<div id="input"><textarea id="code" rows="27" cols="38"></textarea></div>

<div id="ip_banner">INSTRUCTION POINTER</div>
<div id="instruction"><input onClick="select_all('ins_pointer_disp');" onBlur="ins_point_modify_by_address(disp_ins_pointer.value);" id="ins_pointer_disp" type="text" diabled value=0></div>

<div id="da_banner">DATA POINTER</div>
<div id="data"><input  onClick="select_all('dat_pointer_disp');" onBlur="dat_point_modify_by_address(disp_dat_pointer.value);" id="dat_pointer_disp" type="text" diabled value=0></div>

<div id="ref_banner">INSTRUCTION REFERENCE</div>
<table id="reference">
	<tr class="ref_even"><td class="ref_ins">+</td><td>increment byte at data pointer</td></tr>
	<tr class="ref_odd" ><td class="ref_ins">-</td><td>decrement byte at data pointer</td></tr>
	<tr class="ref_even"><td class="ref_ins">></td><td>increment data pointer</td></tr>
	<tr class="ref_odd" ><td class="ref_ins"><</td><td>decrement data pointer</td></tr>
	<tr class="ref_even"><td class="ref_ins">.</td><td>print byte at data pointer</td></tr>
	<tr class="ref_odd" ><td class="ref_ins">,</td><td>accept one byte of input</td></tr>
	<tr class="ref_even"><td class="ref_ins">*</td><td>set breakpoint</td></tr>
</table>

<div id="memory_banner">MEMORY</div>
<div id="ram_disp"></div>
<div id="output_banner">OUTPUT</div>
<div id="output">
<textarea name=code id=output_disp rows="10" cols="38" disabled ></textarea>
</div>
<div id="docs">
	<div id="docs_top_banner">
		Turing Tarpit Simulator Documentation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<button id="docs_mnu_btn" onClick="docs_select('main');"><img src="http://opentextbook.info/icons/16x16/house.png">Main Menu</button>
		<div id="docs_close_btn" onClick="hide_docs();"><img src="http://opentextbook.info/icons/16x16/cross.png"></div></div>

	<div id="docs_content"></div>
</div>

<div id="docs_main" class="docs_hidden">
		<div id="docs_link" onClick="docs_select('basic');">Basic Operation</div>
		<div id="docs_link" onClick="docs_select('features');">Features and Hints</div>
		<div id="docs_link" onClick="docs_select('examples');">Example Code 1</div>
		<div id="docs_link" onClick="docs_select('examples2');">Example Code 2</div>
		<div id="docs_link" onClick="docs_select('ascii');">ASCII Chart</div>
</div>

<div id="docs_basic" class="docs_hidden">

<b>Basic Operation</b>

<p>This Turing Tarpit is an abstract machine or a theoretical model of computer hardware.  The machine has 64 bytes of <b>MEMORY</b> (RAM) and an almost unlimited amount of program storage (ROM). The instruction set is very simple. A user can program the tool by performing one of seven operations:

<p>The <b>'>'</b> and <b>'<'</b> symbols modify the <b>DATA POINTER</b> to point to a new location in the <b>MEMORY</b>. It is possible to set the <b>DATA POINTER</b> to a byte outside the machine's <b>MEMORY</b>. This does not cause an error. If you attempt to modify the <b>MEMORY</b> at this location, the computer will crash and reboot with a <b>SEGFAULT</b> error.

<p>The <b>'+'</b> and <b>'-'</b> symbols allow the user to increment and decrement the <b>MEMORY</b> at the <b>DATA POINTER</b>. Only one byte of <b>MEMORY</b> can be modified at any time. The byte of <b>MEMORY</b> has a minimum and maximum value. When you exceed this value, the byte wraps around to zero.

<p>Another instruction <b>'.'</b> prints the contents of the byte at the <b>DATA POINTER</b>. These numerical values listed in the <b>MEMORY</b> are converted into ASCII and printed as characters in the <b>OUTPUT</b>. A small chart of common ASCII values can be found in this documentation.

<p>The computer can interactively request data from the user with the <b>','</b> instruction. This opens up a dialog to request one byte of data from the user.

<p>An additional instruction <b>'*'</b> halts the execution of the program to allow the user to examine the machine at that point.  This is known as a <b>BREAKPOINT</b>. These breakpoints can be toggled on and off as well as automatically deleted from the code with the user interface below the <b>INPUT</b>.

<p>You can execute the program one step at a time or run the program at full speed until it needs user input or halts. Both methods are useful during development.

<p>More documentation is included in this manual. One section is dedicated to Features and Hints that will aid you in getting the most of this tool.  Another section is devoted to working code examples that provide a tutorial on how to best make use of the language.

</div>

<div id="docs_features" class="docs_hidden">

<b>Features and Hints</b>

<p>All characters outside the Instruction Set are considered comments and will be skipped over during runtime.

<p>While program executes, the <b>INPUT</b> cursor is moved over the current instruction.

<p>User can change the address of the <b>DATA POINTER</b> and Instruction Pointer at any time.
<b>MEMORY</b> and pointers that have been modified are highlighted in yellow until the next step.

<p>The <b>DATA POINTER</b> can point to any location. If you de-reference a pointer out of <b>MEMORY</b> range, a <b>SEGFAULT</b> error will occur. This causes the computer to reboot without warning.

<p>The Instruction Pointer can point to a location range of 1 to the number of characters in the <b>INPUT</b>.

<p>Restarting the machine will reset all <b>MEMORY</b>, Data and Instruction Pointers to zero.

<p>The <b>OUTPUT</b> of the program cannot be edited.

<p>A user can add a break instruction in the code using an asterisk <b>'*'</b>. This will cause the machine to pause when in Run Mode. Breaks can be disabled and enabled with the debug button, and can be permanently deleted with the delete button.

<p>In this version the programs you type in are not saved to your computer.  This must be done as a manual operation.

<p>As this program is reliant on the speed and efficiency of your browser's JavaScript implementation some computers will be able to execute programs faster than others.

<p>This program is completely self contained in one HTML document.  You are free do use it how you wish, subject to the terms and conditions of the GNU GPL license (version 3).

<p>Although it has not been tested in all browsers, it should work well under most any modern web browser that supports Dynamic HTML and JavaScript.  You must have JavaScript enabled for this application to work properly.

<p>No server interaction or outside service is needed for this program to operate.
</div>





<div id="docs_examples" class="docs_hidden">
These are some examples of programs and snippets to get you started. Click the "Load" button to apply these to the <b>INPUT</b> of the simulator. (Please Note: You will erase the current program stored there.) Many of these examples can be found at Wikipedia.

<p><button id="docs_try" onClick="docs_try('docs_example_clear_btye');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Clear Byte:</b>
Sets value at current <b>DATA POINTER</b> to Zero.
<div class=docs_code_ex>
[-]
</div>
<p><button id="docs_try" onClick="docs_try('docs_example_clear_prev');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Clear Previous Cells:</b>
Sets value of all previous bytes including current byte to Zero.
<div class=docs_code_ex>
[[-]<]
</div>
<p><button id="docs_try" onClick="docs_try('docs_example_rewind');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Rewind:</b>
Goes back to byte Zero.
<div class=docs_code_ex>
[<]>
</div>
<p><button id="docs_try" onClick="docs_try('docs_example_fastforward');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Fast-forward:</b>
Increments the <b>DATA POINTER</b> until a 0 is found then decrements it until the current byte is non-zero.
<div class=docs_code_ex>
[>]<
</div>
<p><button id="docs_try" onClick="docs_try('docs_example_cat');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Simple Loop:</b>
Accepts input from the user and echos it to the screen, similar to the UNIX cat program.
<div class=docs_code_ex>
,[.,]
</div>
<p><button id="docs_try" onClick="docs_try('docs_example_data_save');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Moving the <b>DATA POINTER</b>:</b>
Accepts input from the user and saves all input in the memory for future use.
<div class=docs_code_ex>
>,[.>,]
</div>
</div>





<div id="docs_examples2" class="docs_hidden">
<p><button id="docs_try" onClick="docs_try('docs_example_add');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Add Two Bytes:</b>
Adds current location to the next location and leaves behind a Zero for the first value.
<div class=docs_code_ex>
[->+<]
</div>
<p><button id="docs_try" onClick="docs_try('docs_example_uc');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Lower To Upper:</b>
Accepts lower case input from the user and makes it uppercase. Stops when user clicks Cancel.
<div class=docs_code_ex>
,----------[----------------------.,----------]
</div>
<p><button id="docs_try" onClick="docs_try('docs_example_copy_byte');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Copy Value:</b>
Copy value of byte Zero to byte One.
<div class=docs_code_ex>
>[-]>[-]<<[->+>+<<]>>[-<<+>>]<<
</div>
<p><button id="docs_try" onClick="docs_try('docs_example_seek');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Seek:</b>
Move <b>DATA POINTER</b> forward until it lands on a byte with a value of 1, preserving all bytes it passes.
<div class=docs_code_ex>
-[+>-]+
</div>
<p><button id="docs_try" onClick="docs_try('docs_example_add_two');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Single Digit Add:</b>
Adds two single digit numbers and display result. Works on one-digit results only.
<div class=docs_code_ex>
,>++++++[<-------->-],[<+>-]<.
</div>
<p><button id="docs_try" onClick="docs_try('docs_example_multiply');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Single Digit Multiplication:</b>
Multiply two single digit numbers and display result. Works on one-digit results only.
<div class=docs_code_ex>
 ,>,>++++++++[<------<------>>-]
 <<[>[>+>+<<-]>>[<<+>>-]<<<-]
 >>>++++++[<++++++++>-]<.>.
</div>
<p><button id="docs_try" onClick="docs_try('docs_example_divide');"><img src="http://opentextbook.info/icons/16x16/bricks.png">Try</button><b>Single Digit Division:</b>
Accepts two single-digit numbers from the user, divides them and displays the truncated quotient. Dividend is stored in byte Zero and Divisor is stored in byte One.
<div class=docs_code_ex>
,>,>++++++[-<--------<-------->>]<<[>[->+>+<<]>[-<<-[>]>>>[<[>>>-<<<[-]]>>]<<]>>>+<<[-<<+>>]<<<]>[-]>>>>[-<<<<<+>>>>>]<<<<++++++[-<++++++++>]<.
</div>
</div>





<div id="docs_example_clear_btye" class="docs_hidden">

This is an example of clearing a byte

Update first byte to higher number and break

++++++*

Set this byte to zero regardless of current value

[-]*

Notice the Memory 0 location is now set to Zero
</div>





<div id="docs_example_clear_prev" class="docs_hidden">

This example clears the current and all previous bytes to Zero

Set a few bytes to Non Zero values

>+++++
>+++++
>+
>++++
>++++++*

Set all bytes from current back to Zero

[[-]<]*
</div>



<div id="docs_example_rewind" class="docs_hidden">

Often you need to return the Data Pointer to Zero

Set a few bytes to Non Zero values and Move Data Pointer

>+++++
>+++++
>+
>++++
>++++++*

Find Data Pointer Zero

[<]*
</div>



<div id="docs_example_fastforward" class="docs_hidden">

Increments the Data Pointer until a 0 is found then decrements if until the current cell is non-zero

Set a few bytes to Non Zero values and Move Data Pointer

>+++++
>+++++
>+
>++++
>++++++*

Move Data Pointer back to Zero

<<<<*

[>]<*
</div>

<div id="docs_example_cat" class="docs_hidden">

Accepts input from the user and echos it to the screen

Click "Cancel" to Exit Program

,[.,]
</div>

<div id="docs_example_data_save" class="docs_hidden">

Accepts input from the user and saves in memory for future use

>,[.>,]
</div>

<div id="docs_example_add" class="docs_hidden">
Adds current location to the next location and leaves behind a Zero for the first value

Two

++*

Plus Two

>++*

Move Data Pointer to first value

<*

Equals Four

[->+<]*
</div>


<div id="docs_example_uc" class="docs_hidden">

Accepts lower case input from the user and makes it uppercase

 Stops when user clicks Cancel

,----------[----------------------.,----------]
</div>

<div id="docs_example_copy_byte" class="docs_hidden">

Set byte Zero

+++*

Set byte One

>++*

Move back to byte Zero

<*

Copy value of byte Zero to byte One

>[-]>[-]<<[->+>+<<]>>[-<<+>>]<<*
</div>


<div id="docs_example_seek" class="docs_hidden">

Set a few bytes to Non Zero values and Move Data Pointer

++
>+++++
>+++++
>+
>++++
>++++++*

Move DATA POINTER back to byte Zero

<<<<<*

Move DATA POINTER forward until it lands on a byte with a value of 1 preserving all bytes it passes

-[+>-]+*
</div>


<div id="docs_example_add_two" class="docs_hidden">

Adds two single digit numbers and display result

Works on one digit results only

,>++++++[<-------->-],[<+>-]<.

</div>


<div id="docs_example_multiply" class="docs_hidden">

Multiply two single digit numbers and display result

Works on one digit results only

 ,>,>++++++++[<------<------>>-]
 <<[>[>+>+<<-]>>[<<+>>-]<<<-]
 >>>++++++[<++++++++>-]<.>.*
</div>

<div id="docs_example_divide" class="docs_hidden">

Accepts two single digit numbers from the user divides them and displays the truncated quotient

Dividend is stored in byte Zero and Divisor is stored in byte One

,>,>++++++[-<--------<-------->>]<<[>[->+>+<<]>[-<<-[>]>>>[<[>>>-<<<[-]]>>]<<]>>>+<<[-<<+>>]<<<]>[-]>>>>[-<<<<<+>>>>>]<<<<++++++[-<++++++++>]<.*
</div>




<div id="docs_ascii" class="docs_hidden">

<table id="ascii">
<caption><b>ASCII Chart</b></caption>

<tr class="ref_even">
	<td id="dat_col">0</td>
	<td class="ctrl" id="val_col">NUL</td>
	<td id="dat_col">16</td>
	<td class="ctrl" id="val_col">DLE</td>
	<td id="dat_col">32</td>
	<td class="ctrl" id="val_col">SP</td>
	<td id="dat_col">48</td>
	<td id="val_col">0</td>
	<td id="dat_col">64</td>
	<td id="val_col">@</td>
	<td id="dat_col">80</td>
	<td id="val_col">P</td>
	<td id="dat_col">96</td>
	<td id="val_col">`</td>
	<td id="dat_col">112</td>
	<td>p</td>
</tr>

<tr class="ref_odd">
	<td>1</td>
	<td class="ctrl" id="val_col">SOH</td>
	<td>17</td>
	<td class="ctrl" id="val_col">DC1</td>
	<td>33</td>
	<td id="val_col">!</td>
	<td>49</td>
	<td id="val_col">1</td>
	<td>65</td>
	<td id="val_col">A</td>
	<td>81</td>
	<td id="val_col">Q</td>
	<td>97</td>
	<td id="val_col">a</td>
	<td>113</td>
	<td>q</td>
</tr>

<tr class="ref_even">
	<td>2</td>
	<td class="ctrl" id="val_col">STX</td>
	<td>18</td>
	<td class="ctrl" id="val_col">DC2</td>
	<td>34</td>
	<td id="val_col">"</td>
	<td>50</td>
	<td id="val_col">2</td>
	<td>66</td>
	<td id="val_col">B</td>
	<td>82</td>
	<td id="val_col">R</td>
	<td>98</td>
	<td id="val_col">b</td>
	<td>114</td>
	<td>r</td>
</tr>

<tr class="ref_odd">
	<td>3</td>
	<td class="ctrl" id="val_col">ETX</td>
	<td>19</td>
	<td class="ctrl" id="val_col">DC3</td>
	<td>35</td>
	<td id="val_col">#</td>
	<td>51</td>
	<td id="val_col">3</td>
	<td>67</td>
	<td id="val_col">C</td>
	<td>83</td>
	<td id="val_col">S</td>
	<td>99</td>
	<td id="val_col">c</td>
	<td>115</td>
	<td>s</td>
</tr>

<tr class="ref_even">
	<td>4</td>
	<td class="ctrl" id="val_col">EOT</td>
	<td>20</td>
	<td class="ctrl" id="val_col">DC4</td>
	<td>36</td>
	<td id="val_col">$</td>
	<td>52</td>
	<td id="val_col">4</td>
	<td>68</td>
	<td id="val_col">D</td>
	<td>84</td>
	<td id="val_col">T</td>
	<td>100</td>
	<td id="val_col">d</td>
	<td>116</td>
	<td>t</td>
</tr>

<tr class="ref_odd">
	<td>5</td>
	<td class="ctrl" id="val_col">ENQ</td>
	<td>21</td>
	<td class="ctrl" id="val_col">NAK</td>
	<td>37</td>
	<td id="val_col">%</td>
	<td>53</td>
	<td id="val_col">5</td>
	<td>69</td>
	<td id="val_col">E</td>
	<td>85</td>
	<td id="val_col">U</td>
	<td>101</td>
	<td id="val_col">e</td>
	<td>117</td>
	<td>u</td>
</tr>

<tr class="ref_even">
	<td>6</td>
	<td class="ctrl" id="val_col">ACK</td>
	<td>22</td><td class="ctrl" id="val_col">SYN</td>
	<td>38</td>
	<td id="val_col">&amp;</td>
	<td>54</td>
	<td id="val_col">6</td>
	<td>70</td>
	<td id="val_col">F</td>
	<td>86</td>
	<td id="val_col">V</td>
	<td>102</td>
	<td id="val_col">f</td>
	<td>118</td>
	<td>v</td>
</tr>

<tr class="ref_odd">
	<td>7</td>
	<td class="ctrl" id="val_col">BEL</td>
	<td>23</td>
	<td class="ctrl" id="val_col">ETB</td>
	<td>39</td>
	<td id="val_col">'</td>
	<td>55</td>
	<td id="val_col">7</td>
	<td>71</td>
	<td id="val_col">G</td>
	<td>87</td>
	<td id="val_col">W</td>
	<td>103</td>
	<td id="val_col">g</td>
	<td>119</td>
	<td>w</td>
</tr>

<tr class="ref_even">
	<td>8</td>
	<td class="ctrl" id="val_col">BS</td>
	<td>24</td>
	<td class="ctrl" id="val_col">CAN</td>
	<td>40</td>
	<td id="val_col">(</td>
	<td>56</td>
	<td id="val_col">8</td>
	<td>72</td>
	<td id="val_col">H</td>
	<td>88</td>
	<td id="val_col">X</td>
	<td>104</td>
	<td id="val_col">h</td>
	<td>120</td>
	<td>x</td>
</tr>

<tr class="ref_odd">
	<td>9</td>
	<td class="ctrl" id="val_col">HT</td>
	<td>25</td>
	<td class="ctrl" id="val_col">EM</td>
	<td>41</td>
	<td id="val_col">)</td>
	<td>57</td>
	<td id="val_col">9</td>
	<td>73</td>
	<td id="val_col">I</td>
	<td>89</td>
	<td id="val_col">Y</td>
	<td>105</td>
	<td id="val_col">i</td>
	<td>121</td>
	<td>y</td>
</tr>

<tr class="ref_even">
	<td>10</td>
	<td class="ctrl" id="val_col">LF</td>
	<td>26</td>
	<td class="ctrl" id="val_col">SUB</td>
	<td>42</td>
	<td id="val_col">*</td>
	<td>58</td>
	<td id="val_col">:</td>
	<td>74</td>
	<td id="val_col">J</td>
	<td>90</td>
	<td id="val_col">Z</td>
	<td>106</td>
	<td id="val_col">j</td>
	<td>122</td>
	<td>z</td>
</tr>

<tr class="ref_odd">
	<td>11</td>
	<td class="ctrl" id="val_col">VT</td>
	<td>27</td>
	<td class="ctrl" id="val_col">ESC</td>
	<td>43</td>
	<td id="val_col">+</td>
	<td>59</td>
	<td id="val_col">;</td>
	<td>75</td>
	<td id="val_col">K</td>
	<td>91</td>
	<td id="val_col">[</td>
	<td>107</td>
	<td id="val_col">k</td>
	<td>123</td>
	<td>{</td>
</tr>

<tr class="ref_even">
	<td>12</td>
	<td class="ctrl" id="val_col">FF</td>
	<td>28</td>
	<td class="ctrl" id="val_col">FS</td>
	<td>44</td>
	<td id="val_col">,</td>
	<td>60</td>
	<td id="val_col">&lt;</td>
	<td>76</td>
	<td id="val_col">L</td>
	<td>92</td>
	<td id="val_col">\</td>
	<td>108</td>
	<td id="val_col">l</td>
	<td>124</td>
	<td>|</td>
</tr>

<tr class="ref_odd">
	<td>13</td>
	<td class="ctrl" id="val_col">CR</td>
	<td>29</td>
	<td class="ctrl" id="val_col">GS</td>
	<td>45</td>
	<td id="val_col">-</td>
	<td>61</td>
	<td id="val_col">=</td>
	<td>77</td>
	<td id="val_col">M</td>
	<td>93</td>
	<td id="val_col">]</td>
	<td>109</td>
	<td id="val_col">m</td>
	<td>125</td>
	<td>}</td>
</tr>

<tr class="ref_even">
	<td>14</td>
	<td class="ctrl" id="val_col">SO</td>
	<td>30</td>
	<td class="ctrl" id="val_col">RS</td>
	<td>46</td>
	<td id="val_col">.</td>
	<td>62</td>
	<td id="val_col">></td>
	<td>78</td>
	<td id="val_col">N</td>
	<td>94</td>
	<td id="val_col">^</td>
	<td>110</td>
	<td id="val_col">n</td>
	<td>126</td>
	<td>~</td>
</tr>

<tr class="ref_odd">
	<td>15</td>
	<td class="ctrl" id="val_col">SI</td>
	<td>31</td>
	<td class="ctrl" id="val_col">US</td>
	<td>47</td>
	<td id="val_col">/</td>
	<td>63</td>
	<td id="val_col">?</td>
	<td>79</td>
	<td id="val_col">O</td>
	<td>95</td>
	<td id="val_col">_</td>
	<td>111</td>
	<td id="val_col">o</td>
	<td>127</td>
	<td class="ctrl">DEL</td>
</tr>
</table>
</div>

</body>
</html>

